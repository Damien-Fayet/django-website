{% extends 'biblio/base.html' %}
{% load biblio_extras %}

{% block title %}{{ book.title }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-4">
        {% if book.cover_image_url %}
            <img src="{{ book.cover_image_url }}" class="img-fluid book-cover rounded shadow" alt="{{ book.title }}">
        {% else %}
            <div class="bg-light d-flex align-items-center justify-content-center rounded shadow" style="height: 300px; width: 100%;">
                <i class="bi bi-book display-3 text-muted"></i>
            </div>
        {% endif %}
        
        <div class="mt-3 d-grid gap-2">
            <a href="{% url 'biblio:edit_book' book.pk %}" class="btn btn-primary">
                <i class="bi bi-pencil"></i> Modifier
            </a>
            <a href="{% url 'biblio:delete_book' book.pk %}" class="btn btn-outline-danger">
                <i class="bi bi-trash"></i> Supprimer
            </a>
        </div>
    </div>
    
    <div class="col-md-8">
        <div class="d-flex justify-content-between align-items-start mb-3">
            <h1>{{ book.title }}</h1>
        </div>
        
        <div class="row mb-4">
            <div class="col-md-6">
                <h6><i class="bi bi-person"></i> Auteur(s)</h6>
                <p>{{ book.authors }}</p>
                
                {% if book.publisher %}
                    <h6><i class="bi bi-building"></i> Éditeur</h6>
                    <p>{{ book.publisher }}</p>
                {% endif %}
                
                {% if book.published_date %}
                    <h6><i class="bi bi-calendar"></i> Date de publication</h6>
                    <p>{{ book.published_date|date:"d F Y" }}</p>
                {% endif %}
                
                {% if book.page_count %}
                    <h6><i class="bi bi-file-text"></i> Nombre de pages</h6>
                    <p>{{ book.page_count }}</p>
                {% endif %}
            </div>
            
            <div class="col-md-6">
                <h6><i class="bi bi-upc-scan"></i> ISBN</h6>
                <p><code>{{ book.isbn }}</code></p>
                
                {% if book.age_range %}
                    <h6><i class="bi bi-people"></i> Tranche d'âge</h6>
                    <p><span class="badge bg-info">{{ book.age_range }}</span></p>
                {% endif %}
                
                {% if book.reading_level %}
                    <h6><i class="bi bi-mortarboard"></i> Niveau de lecture</h6>
                    <p><span class="badge bg-secondary">{{ book.reading_level }}</span></p>
                {% endif %}
                
                {% if book.themes %}
                    <h6><i class="bi bi-tags"></i> Thème(s)</h6>
                    <p>
                        {% for theme in book.themes|split:"," %}
                            <span class="badge bg-primary me-1">{{ theme|trim }}</span>
                        {% endfor %}
                    </p>
                {% endif %}
                
                {% if book.rating %}
                    <h6><i class="bi bi-star"></i> Note</h6>
                    <div class="rating">
                        {% for i in "12345" %}
                            {% if forloop.counter <= book.rating %}
                                <i class="bi bi-star-fill"></i>
                            {% else %}
                                <i class="bi bi-star"></i>
                            {% endif %}
                        {% endfor %}
                        <span class="ms-2">{{ book.rating }}/5</span>
                    </div>
                {% endif %}
            </div>
        </div>
        
        {% if book.description %}
            <div class="mb-4">
                <h6><i class="bi bi-journal-text"></i> Description</h6>
                <div class="border-start border-primary ps-3">
                    <p>{{ book.description|linebreaks }}</p>
                </div>
            </div>
        {% endif %}
        
        {% if book.comments %}
            <div class="mb-4">
                <h6><i class="bi bi-chat-left-text"></i> Commentaires</h6>
                <div class="alert alert-light">
                    <p class="mb-0">{{ book.comments|linebreaks }}</p>
                </div>
            </div>
        {% endif %}
        
        <div class="row text-muted small">
            <div class="col-md-6">
                <i class="bi bi-plus-circle"></i> Ajouté le {{ book.added_date|date:"d/m/Y à H:i" }}
            </div>
            <div class="col-md-6">
                <i class="bi bi-pencil-square"></i> Modifié le {{ book.updated_date|date:"d/m/Y à H:i" }}
            </div>
        </div>
    </div>
</div>

<div class="mt-4">
    <a href="{% url 'biblio:book_list' %}" class="btn btn-outline-secondary">
        <i class="bi bi-arrow-left"></i> Retour à la liste
    </a>
</div>
{% endblock %}
